(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[34],{1139:function(e,n,t){"use strict";t.r(n);var a=t(867),r=t(165),o=t(166),i=t(168),c=t(167),u=t(169),l=t(1),s=t.n(l),m=t(523),p=t(520),f=t(524),d=t(516),h=t(896),b=t(549),g=t(739),v=t(809),y=t(686),x=t(687),z=t(164),O=t(175),P=t(808),E=t(1128),k=t(1126),j=t(1127),w=t(1129),A=t(529),S=t.n(A),C=(l.Component,s.a.lazy((function(){return t.e(38).then(t.bind(null,1138))})),s.a.lazy((function(){return t.e(51).then(t.bind(null,1133))}))),N=s.a.lazy((function(){return Promise.all([t.e(1),t.e(24),t.e(48)]).then(t.bind(null,1134))})),I=function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(i.a)(this,Object(c.a)(n).call(this,e))).loading=function(){return s.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},t.appendRoleToRouter=function(e,n){return Object(a.a)(e).map((function(e,t){return n.map((function(n,t){return e.name===n.name&&(e.roles=n.roles),n})),e}))},t.appendRoleToNav=function(e,n){return Object(a.a)(e).map((function(e,t){return n.map((function(n,t){return e.name===n.name&&(e.roles=n.roles),e.children&&e.children.map((function(e){e.name===n.name&&(e.roles=n.roles)})),n})),e}))},t.isValidRole=function(e,n){if(e.includes("Administrator"))return!0;if(!n)return!1;if(!e)return!1;for(var t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return!0;return!1},t.state={roles:[],nav_roles:[],navigation:g.a},t}return Object(u.a)(n,e),Object(o.a)(n,[{key:"componentWillMount",value:function(){var e=this,n=[];if(localStorage.getItem("nav_roles")&&localStorage.getItem("roles")){var t=localStorage.getItem("nav_roles"),a=localStorage.getItem("roles");this.setState({nav_roles:JSON.parse(t),roles:JSON.parse(a)})}Object(y.b)(z.a.getAccessToken()).then((function(t){(n=t.data).map((function(e){var n=e.roles;return e.roles=n})),Object(x.d)(z.a.getUsername(),z.a.getAccessToken()).then((function(t){var a=t.data?t.data.role:["Guest"];e.setState({nav_roles:n,roles:a}),localStorage.setItem("nav_roles",JSON.stringify(n)),localStorage.setItem("roles",JSON.stringify(a))}))}))}},{key:"signOut",value:function(e){e.preventDefault(),this.props.history.push("/login")}},{key:"render",value:function(){var e=this,n=this.state.roles,t=this.appendRoleToRouter(v.a,this.state.nav_roles).filter((function(t){return e.isValidRole(n,t.roles)})),a=this.appendRoleToNav(g.a.items,this.state.nav_roles);console.log(a);var r=a.filter((function(t){return e.isValidRole(n,t.roles)}));console.log(r),r.map((function(t){t.children&&(t.children=t.children.filter((function(t){return e.isValidRole(n,t.roles)})))})),console.log(r);var o={items:r};return s.a.createElement("div",{className:"app"},s.a.createElement(b.c,{fixed:!0},s.a.createElement(l.Suspense,{fallback:this.loading()},s.a.createElement(N,{onLogout:function(n){return e.signOut(n)}}))),s.a.createElement("div",{className:"app-body"},s.a.createElement(b.e,{fixed:!0,display:"lg"},s.a.createElement(b.h,null),s.a.createElement(b.g,null),s.a.createElement(l.Suspense,null,s.a.createElement(b.j,Object.assign({navConfig:o},this.props,{router:d}))),s.a.createElement(b.f,null),s.a.createElement(b.i,null)),s.a.createElement("main",{className:"main"},s.a.createElement(b.a,{appRoutes:v.a,router:d}),s.a.createElement(h.a,{fluid:!0},s.a.createElement(l.Suspense,{fallback:this.loading()},s.a.createElement(m.a,null,t.map((function(e,n){return e.component?s.a.createElement(p.a,{key:n,path:e.path,exact:e.exact,name:e.name,render:function(n){return s.a.createElement(e.component,n)}}):null})),s.a.createElement(f.a,{from:"/",to:"/dashboard"})))))),s.a.createElement(b.b,null,s.a.createElement(l.Suspense,{fallback:this.loading()},s.a.createElement(C,null))))}}]),n}(l.Component);n.default=I},538:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return m})),t.d(n,"c",(function(){return f}));var a=t(532),r=t.n(a),o=t(533);t(715),t(164);function i(){return c.apply(this,arguments)}function c(){return(c=Object(o.a)(r.a.mark((function e(){var n,t,a,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:"",t=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,fetch(n,{method:"POST",mode:"no-cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 4:return a=e.sent,e.abrupt("return",a.text().then((function(e){return console.log(e),JSON.parse(e)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(r.a.mark((function e(){var n,t,a,o,i=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:"",t=i.length>1&&void 0!==i[1]?i[1]:{},a=i.length>2?i[2]:void 0,e.next=5,fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify(t)});case 5:return o=e.sent,e.abrupt("return",o.text().then((function(e){return console.log(e),JSON.parse(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){try{JSON.parse(e)}catch(n){return!1}return!0}function m(e){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(r.a.mark((function e(n){var t,a,o,i,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>1&&void 0!==c[1]?c[1]:"",a=c.length>2&&void 0!==c[2]?c[2]:{},o=c.length>3?c[3]:void 0,e.next=5,fetch(t,{method:n,headers:{"Content-Type":"application/json",Authorization:"Bearer "+o},body:JSON.stringify(a)});case 5:return i=e.sent,e.abrupt("return",i.text().then((function(e){if(s(e))return JSON.parse(e);throw"Cannot parse value not JSON"})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,n){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(r.a.mark((function e(n,t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:n,code:t,type:"ga"},e.abrupt("return",i("/api/auth",a).then((function(e){return console.log(e),e})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},686:function(e,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"c",(function(){return p})),t.d(n,"a",(function(){return d}));var a=t(532),r=t.n(a),o=t(533),i=(t(715),t(538)),c=t(537),u=t.n(c),l={data:[{id:1,name:"Dashboard",roles:["Administrator","Executive","Customer service"]},{id:2,name:"Events",roles:["Administrator","Executive","Customer service"]},{id:3,name:"NavManagement",roles:["Administrator"]},{id:4,name:"RoleManagement",roles:["Administrator"]},{id:5,name:"Add new event",roles:["Administrator"]},{id:6,name:"Edit",roles:["Administrator"]},{id:7,name:"Info",roles:["Administrator","Executive"]}]};function s(e){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/nav_role",e.next=3,fetch("/api/nav_role",{method:"GET",headers:{Authorization:"Bearer "+n}}).then((function(e){return 200===e.status?e.json().then((function(e){return e.map((function(e){e.roles=e.roles.split(",")})),console.log(e),{data:e}})):l})).catch((function(e){return console.log(e),u()("Th\xf4ng b\xe1o",e,"error"),l}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,n){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(r.a.mark((function e(n,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),n.roles=n.roles.toString(),console.log(n),e.abrupt("return",Object(i.a)("/api/nav_role/edit",n,t).then((function(e){return console.log(e),e})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,n){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(r.a.mark((function e(n,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),n.roles=n.roles.toString(),console.log(n),e.abrupt("return",Object(i.a)("/api/nav_role/add",n,t).then((function(e){return console.log(e),e})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},687:function(e,n,t){"use strict";t.d(n,"c",(function(){return l})),t.d(n,"d",(function(){return m})),t.d(n,"e",(function(){return f})),t.d(n,"a",(function(){return h})),t.d(n,"b",(function(){return g}));var a=t(532),r=t.n(a),o=t(533),i=t(538),c=t(164),u=[{id:"1",name:"ADMIN",username:"ADMIN",role:"Administrator",status:"ON"},{id:"2",name:"L\xea Th\xe0nh C\xf4ng",username:"conglt",role:"Administrator",status:"OFF"},{id:"3",name:"B\xf9i M\u1ea1nh C\u01b0\u1eddng",username:"cuongbm2",role:"Executive",status:"ON"},{id:"4",name:"Nguy\u1ec5n H\u1eefu Phong",username:"phongnh",role:"Executive",status:"ON"}];function l(e){return s.apply(this,arguments)}function s(){return(s=Object(o.a)(r.a.mark((function e(n){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/roles",e.next=3,fetch(t,{method:"GET",headers:{Authorization:"Bearer "+n}}).then((function(e){var n=e;return n.data=[],200!==e.status?(console.log("URL: "+t+" "+e.status+" "+e.statusText),n.data=u,c.a.signout((function(){})),n):200===e.status?(console.log("URL: "+t+" 200 OK"),e.json().then((function(e){return console.log(e),n.data=e,n}))):n})).catch((function(){return console.log("Can\u2019t access "+t+" response. Blocked by browser?"),{}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,n){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(r.a.mark((function e(n,t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/get_role/"+n,e.next=3,fetch(a,{method:"GET",headers:{Authorization:"Bearer "+t}}).then((function(e){var n=e;return n.data=[],200!==e.status?(console.log("URL: "+a+" "+e.status+" "+e.statusText),n.data={role:["Guest"]},c.a.signout((function(){})),n):200===e.status?(console.log("URL: "+a+" 200 OK"),e.json().then((function(e){return console.log(e),0===e.length||"OFF"===e[0].status?n.data={role:["Guest"]}:n.data={role:e[0].role.split(",")},n}))):n})).catch((function(){return console.log("Can\u2019t access "+a+" response. Blocked by browser?"),{}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,n){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(r.a.mark((function e(n,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.a)("/api/roles/edit",n,t).then((function(e){return console.log(e),e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,n){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(r.a.mark((function e(n,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.a)("/api/roles/add",n,t).then((function(e){return console.log(e),e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,n){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(r.a.mark((function e(n,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.a)("/api/roles/delete",n,t).then((function(e){return console.log(e),e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},715:function(e,n,t){"use strict";var a=t(810),r=t.n(a),o=t(164);r.a.create({baseURL:"http://localhost:9080/api/",headers:{Authorization:"Bearer "+o.a.getAccessToken()}}),o.a.getAccessToken()},739:function(e,n,t){"use strict";n.a={items:[{name:"Dashboard",url:"/dashboard",icon:"icon-speedometer"},{name:"Events",icon:"icon-equalizer",children:[{name:"Events",url:"/events",icon:"icon-puzzle",badge:{variant:"info",text:"MAIN"}},{name:"Domains",url:"/domains",icon:"icon-puzzle"},{name:"Profiles",url:"/profiles",icon:"icon-puzzle"},{name:"Tiers",url:"/tiers",icon:"icon-puzzle"},{name:"Rules",url:"/rules",icon:"icon-puzzle"},{name:"Conditions",url:"/conditions",icon:"icon-energy"},{name:"Sources",url:"/sources",icon:"icon-layers"},{name:"InfoCode",url:"/info-code",icon:"icon-info"},{name:"ActionCode",url:"/action-code",icon:"icon-rocket"},{name:"Clients",url:"/clients",icon:"icon-people"},{name:"DataDefinitions",url:"/data-definitions",icon:"icon-grid"},{name:"AccumulationKeys",url:"/accumulation-keys",icon:"icon-diamond"}]},{name:"CheckAccumulation",url:"/check-accumulation",icon:"icon-star"},{name:"ManualData",url:"/manual-data",icon:"icon-notebook"},{name:"ReloadConfig",url:"/reload-config",icon:"icon-refresh"},{name:"RoleManagement",url:"/role-management",icon:"icon-user"},{name:"NavManagement",url:"/nav-management",icon:"icon-compass"}]}},809:function(e,n,t){"use strict";var a=t(1),r=t.n(a),o=r.a.lazy((function(){return Promise.all([t.e(0),t.e(9),t.e(52)]).then(t.bind(null,920))})),i=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(4),t.e(13)]).then(t.bind(null,1122))})),c=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(10)]).then(t.bind(null,1065))})),u=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(11)]).then(t.bind(null,1072))})),l=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(12)]).then(t.bind(null,1073))})),s=r.a.lazy((function(){return Promise.all([t.e(1),t.e(2),t.e(3),t.e(4),t.e(29)]).then(t.bind(null,1125))})),m=r.a.lazy((function(){return Promise.all([t.e(1),t.e(2),t.e(3),t.e(4),t.e(30)]).then(t.bind(null,1074))})),p=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(19)]).then(t.bind(null,1075))})),f=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(27)]).then(t.bind(null,663))})),d=r.a.lazy((function(){return Promise.all([t.e(0),t.e(37)]).then(t.bind(null,1076))})),h=r.a.lazy((function(){return Promise.all([t.e(0),t.e(44)]).then(t.bind(null,1077))})),b=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(14)]).then(t.bind(null,666))})),g=r.a.lazy((function(){return Promise.all([t.e(0),t.e(36),t.e(49)]).then(t.bind(null,1078))})),v=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(26)]).then(t.bind(null,665))})),y=r.a.lazy((function(){return Promise.all([t.e(0),t.e(47)]).then(t.bind(null,1079))})),x=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(28)]).then(t.bind(null,664))})),z=r.a.lazy((function(){return Promise.all([t.e(0),t.e(45)]).then(t.bind(null,1080))})),O=r.a.lazy((function(){return Promise.all([t.e(0),t.e(43)]).then(t.bind(null,1081))})),P=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(16)]).then(t.bind(null,1082))})),E=(r.a.lazy((function(){return t.e(50).then(t.t.bind(null,1083,7))})),r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(18)]).then(t.bind(null,1084))}))),k=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(17)]).then(t.bind(null,1124))})),j=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(15)]).then(t.bind(null,1085))})),w=r.a.lazy((function(){return Promise.all([t.e(0),t.e(40)]).then(t.bind(null,1086))})),A=[{path:"/",exact:!0,name:"Home"},{path:"/dashboard",name:"Dashboard",component:o},{path:"/events",exact:!0,name:"Events",component:i},{path:"/events/event/add",exact:!0,name:"Add new event",component:l},{path:"/events/:id/edit",exact:!0,name:"Edit",component:u},{path:"/events/:id",exact:!0,name:"Info",component:c},{path:"/domains",exact:!0,name:"Domains",component:b},{path:"/domains/:id",exact:!0,name:"DomainInfo",component:g},{path:"/profiles",exact:!0,name:"Profiles",component:v},{path:"/profiles/:id",exact:!0,name:"ProfileInfo",component:y},{path:"/tiers",exact:!0,name:"Tiers",component:x},{path:"/tiers/:id",exact:!0,name:"TierInfo",component:z},{path:"/conditions",exact:!0,name:"Conditions",component:r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(23)]).then(t.bind(null,1087))}))},{path:"/conditions/:id",exact:!0,name:"ConditionInfo",component:r.a.lazy((function(){return Promise.all([t.e(0),t.e(41)]).then(t.bind(null,1088))}))},{path:"/info-code",exact:!0,name:"InfoCode",component:r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(21)]).then(t.bind(null,1089))}))},{path:"/info-code/:id",exact:!0,name:"InfoCodeInfo",component:r.a.lazy((function(){return Promise.all([t.e(0),t.e(42)]).then(t.bind(null,1090))}))},{path:"/action-code",exact:!0,name:"ActionCode",component:r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(20)]).then(t.bind(null,1091))}))},{path:"/action-code/:id",exact:!0,name:"ActionCodeInfo",component:r.a.lazy((function(){return Promise.all([t.e(0),t.e(39)]).then(t.bind(null,1092))}))},{path:"/clients",exact:!0,name:"Clients",component:j},{path:"/clients/:id",exact:!0,name:"ClientInfo",component:w},{path:"/rules",exact:!0,name:"Rules",component:f},{path:"/rules/:id",exact:!0,name:"RuleInfo",component:d},{path:"/ruleVersions/:id",exact:!0,name:"RuleVersionInfo",component:O},{path:"/sources",exact:!0,name:"Sources",component:p},{path:"/sources/:id",exact:!0,name:"SourceInfo",component:h},{path:"/data-definitions",exact:!0,name:"DataDefinitions",component:P},{path:"/accumulation-keys",exact:!0,name:"AccumulationKeys",component:E},{path:"/check-accumulation",exact:!0,name:"CheckAccumulation",component:r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(33)]).then(t.bind(null,1093))}))},{path:"/manual-data",exact:!0,name:"ManualData",component:r.a.lazy((function(){return Promise.all([t.e(1),t.e(2),t.e(3),t.e(4),t.e(22)]).then(t.bind(null,1120))}))},{path:"/reload-config",exact:!0,name:"ReloadConfig",component:k},{path:"/role-management",name:"RoleManagement",component:s},{path:"/nav-management",name:"NavManagement",component:m}];n.a=A}}]);
//# sourceMappingURL=34.8eb347ff.chunk.js.map